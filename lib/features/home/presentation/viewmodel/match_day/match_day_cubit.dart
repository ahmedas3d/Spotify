import 'package:bloc/bloc.dart';
import 'package:equatable/equatable.dart';
import 'package:sportify/features/Home/data/model/matchesbydate/match.dart';
import 'package:sportify/features/Home/data/repo/homerepoImp.dart';

part 'match_day_state.dart';

class MatchDayCubit extends Cubit<MatchDayState> {
  final Homerepoimp homeRepo;
  MatchDayCubit(this.homeRepo) : super(MatchDayInitial());
  void getMatchesbyDate({
    required String startDate,
    required String dateTo,
  }) async {
    emit(MatchDayLoading());
    final result = homeRepo.GetMatchesbyDate(
      dateFrom: startDate,
      dateTo: dateTo,
    );
    result.fold(
      (failure) => emit(MatchDayError(message: failure.message)),
      (data) => data.then((value) {
        emit(MatchDayLoaded(
            matches: value['matches']
                .map<Matche>((e) => Matche
                    .fromFiltersDateFrom20240928DateTo20240929PermissionTierOneCompetitionsPlResultSetCount7CompetitionsPlFirst20240928Last20240928Played0MatchesAreaId2072NameEnglandCodeEngFlagHttpsCrestsFootballDataOrg770SvgCompetitionId2021NamePremierLeagueCodePlTypeLeagueEmblemHttpsCrestsFootballDataOrgPlPngSeasonId2287StartDate20240816EndDate20250525CurrentMatchday6WinnerNullId497467UtcDate20240928T113000ZStatusTimedMatchday6StageRegularSeasonGroupNullLastUpdated20240926T102056ZHomeTeamId67NameNewcastleUnitedFcShortNameNewcastleTlaNewCrestHttpsCrestsFootballDataOrg67PngAwayTeamId65NameManchesterCityFcShortNameManCityTlaMciCrestHttpsCrestsFootballDataOrg65PngScoreWinnerNullDurationRegularFullTimeHomeNullAwayNullHalfTimeHomeNullAwayNullOddsMsgActivateOddsPackageInUserPanelToRetrieveOddsRefereesAreaId2072NameEnglandCodeEngFlagHttpsCrestsFootballDataOrg770SvgCompetitionId2021NamePremierLeagueCodePlTypeLeagueEmblemHttpsCrestsFootballDataOrgPlPngSeasonId2287StartDate20240816EndDate20250525CurrentMatchday6WinnerNullId497462UtcDate20240928T140000ZStatusTimedMatchday6StageRegularSeasonGroupNullLastUpdated20240922T013206ZHomeTeamId402NameBrentfordFcShortNameBrentfordTlaBreCrestHttpsCrestsFootballDataOrg402PngAwayTeamId563NameWestHamUnitedFcShortNameWestHamTlaWhuCrestHttpsCrestsFootballDataOrg563PngScoreWinnerNullDurationRegularFullTimeHomeNullAwayNullHalfTimeHomeNullAwayNullOddsMsgActivateOddsPackageInUserPanelToRetrieveOddsRefereesAreaId2072NameEnglandCodeEngFlagHttpsCrestsFootballDataOrg770SvgCompetitionId2021NamePremierLeagueCodePlTypeLeagueEmblemHttpsCrestsFootballDataOrgPlPngSeasonId2287StartDate20240816EndDate20250525CurrentMatchday6WinnerNullId497461UtcDate20240928T140000ZStatusTimedMatchday6StageRegularSeasonGroupNullLastUpdated20240926T102056ZHomeTeamId57NameArsenalFcShortNameArsenalTlaArsCrestHttpsCrestsFootballDataOrg57PngAwayTeamId338NameLeicesterCityFcShortNameLeicesterCityTlaLeiCrestHttpsCrestsFootballDataOrg338PngScoreWinnerNullDurationRegularFullTimeHomeNullAwayNullHalfTimeHomeNullAwayNullOddsMsgActivateOddsPackageInUserPanelToRetrieveOddsRefereesAreaId2072NameEnglandCodeEngFlagHttpsCrestsFootballDataOrg770SvgCompetitionId2021NamePremierLeagueCodePlTypeLeagueEmblemHttpsCrestsFootballDataOrgPlPngSeasonId2287StartDate20240816EndDate20250525CurrentMatchday6WinnerNullId497463UtcDate20240928T140000ZStatusTimedMatchday6StageRegularSeasonGroupNullLastUpdated20240926T102056ZHomeTeamId61NameChelseaFcShortNameChelseaTlaCheCrestHttpsCrestsFootballDataOrg61PngAwayTeamId397NameBrightonHoveAlbionFcShortNameBrightonHoveTlaBhaCrestHttpsCrestsFootballDataOrg397PngScoreWinnerNullDurationRegularFullTimeHomeNullAwayNullHalfTimeHomeNullAwayNullOddsMsgActivateOddsPackageInUserPanelToRetrieveOddsRefereesAreaId2072NameEnglandCodeEngFlagHttpsCrestsFootballDataOrg770SvgCompetitionId2021NamePremierLeagueCodePlTypeLeagueEmblemHttpsCrestsFootballDataOrgPlPngSeasonId2287StartDate20240816EndDate20250525CurrentMatchday6WinnerNullId497468UtcDate20240928T140000ZStatusTimedMatchday6StageRegularSeasonGroupNullLastUpdated20240923T013204ZHomeTeamId351NameNottinghamForestFcShortNameNottinghamTlaNotCrestHttpsCrestsFootballDataOrg351PngAwayTeamId63NameFulhamFcShortNameFulhamTlaFulCrestHttpsCrestsFootballDataOrg63PngScoreWinnerNullDurationRegularFullTimeHomeNullAwayNullHalfTimeHomeNullAwayNullOddsMsgActivateOddsPackageInUserPanelToRetrieveOddsRefereesAreaId2072NameEnglandCodeEngFlagHttpsCrestsFootballDataOrg770SvgCompetitionId2021NamePremierLeagueCodePlTypeLeagueEmblemHttpsCrestsFootballDataOrgPlPngSeasonId2287StartDate20240816EndDate20250525CurrentMatchday6WinnerNullId497464UtcDate20240928T140000ZStatusTimedMatchday6StageRegularSeasonGroupNullLastUpdated20240922T013206ZHomeTeamId62NameEvertonFcShortNameEvertonTlaEveCrestHttpsCrestsFootballDataOrg62PngAwayTeamId354NameCrystalPalaceFcShortNameCrystalPalaceTlaCryCrestHttpsCrestsFootballDataOrg354PngScoreWinnerNullDurationRegularFullTimeHomeNullAwayNullHalfTimeHomeNullAwayNullOddsMsgActivateOddsPackageInUserPanelToRetrieveOddsRefereesAreaId2072NameEnglandCodeEngFlagHttpsCrestsFootballDataOrg770SvgCompetitionId2021NamePremierLeagueCodePlTypeLeagueEmblemHttpsCrestsFootballDataOrgPlPngSeasonId2287StartDate20240816EndDate20250525CurrentMatchday6WinnerNullId497469UtcDate20240928T163000ZStatusTimedMatchday6StageRegularSeasonGroupNullLastUpdated20240926T102056ZHomeTeamId76NameWolverhamptonWanderersFcShortNameWolverhamptonTlaWolCrestHttpsCrestsFootballDataOrg76PngAwayTeamId64NameLiverpoolFcShortNameLiverpoolTlaLivCrestHttpsCrestsFootballDataOrg64PngScoreWinnerNullDurationRegularFullTimeHomeNullAwayNullHalfTimeHomeNullAwayNullOddsMsgActivateOddsPackageInUserPanelToRetrieveOddsReferees(
                        e))
                .toList()));
      }),
    );
  }
}
